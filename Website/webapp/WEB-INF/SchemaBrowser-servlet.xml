<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">
<beans>
	<!--  Controllers -->
  <bean id="TableDisplayController" class="org.gusdb.schemabrowser.controller.TableDisplayController">
    <property name="databaseFactory"><ref bean="databaseFactory" /></property>
	<property name="documentationDAO"><ref bean="documentationDAO"/></property>
  </bean>
  <bean id="CategoryDisplayController" class="org.gusdb.schemabrowser.controller.CategoryDisplayController">
    <property name="databaseFactory"><ref bean="databaseFactory" /></property>
	<property name="documentationDAO"><ref bean="documentationDAO"/></property>
  </bean>
  <bean id="EditDocumentationController" class="org.gusdb.schemabrowser.controller.EditDocumentationController">
  	<property name="databaseFactory"><ref bean="databaseFactory" /></property>
  	<property name="documentationDAO"><ref bean="documentationDAO"/></property>
  	<property name="sessionForm"><value>true</value></property>
  	<property name="commandName"><value>documentation</value></property>
  	<property name="commandClass"><value>org.gusdb.schemabrowser.model.Documentation</value></property>
  	<property name="validator"><ref bean="documentationValidator"/></property>
  	<property name="formView"><value>edit/edit</value></property>
  	<property name="successView"><value>../tableList.htm</value></property>
  </bean>
	
	<!--  Spring Requirements -->
  <bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"><value>org.springframework.web.servlet.view.JstlView</value></property>
    <property name="prefix"><value>/WEB-INF/jsp/</value>
    </property><property name="suffix"><value>.jsp</value></property>
  </bean>
  <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
    <property name="mappings">
      <props>
        <prop key="/tableList.htm">TableDisplayController</prop>
        <prop key="/categoryList.htm">CategoryDisplayController</prop>
        <prop key="/table.htm">TableDisplayController</prop>
        <prop key="/edit/edit.htm">EditDocumentationController</prop>
      </props>
    </property>
  </bean>
    
  <!-- Hibernate Requirements  -->
  <bean id="sessionFactory" class="org.springframework.orm.hibernate.LocalSessionFactoryBean">
    <property name="mappingResources">
      <list>
        <value>org/gusdb/schemabrowser/model/Documentation.hbm.xml</value>
      </list>
    </property>
    <property name="hibernateProperties">
      <props>
        <prop key="hibernate.dialect">net.sf.hibernate.dialect.PostgreSQLDialect</prop>
<!--    <prop key="hibernate.show_sql">true</prop>  -->
<!--    <prop key="hibernate.hbm2ddl.auto">create-drop</prop>   -->
      </props>
    </property>
    <property name="dataSource"><ref bean="dataSource" /></property>
  </bean>
  
  <bean id="transactionManager" class="org.springframework.orm.hibernate.HibernateTransactionManager">
    <property name="sessionFactory"><ref bean="sessionFactory" /></property>
  </bean>
  
  
  <!--  Database Settings -->
  <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName"><value>org.postgresql.Driver</value></property>
    <property name="url"><value>jdbc:postgresql:doc</value></property>
    <property name="username"><value>msaffitz</value></property>
    <property name="password"><value></value></property>
  </bean>
  
  <!--  Local Bean Settings  -->
    <bean id="databaseFactory" class="org.gusdb.schemabrowser.DatabaseFactory">
    <property name="databaseSource"><value>/Users/msaffitz/cvswork/projecthome35/GusSchema/Definition/config/gus_schema.xml</value></property>
    <property name="categorySource"><value>/Users/msaffitz/cvswork/projecthome35/GusSchema/Definition/config/gus_categories.xml</value></property>
    <property name="propertyFile"><value>/Users/msaffitz/cvswork/projecthome35/install/gus.config</value></property>
  </bean>

  <bean id="documentationDAO" class="org.gusdb.schemabrowser.dao.DocumentationDAO">
    <property name="sessionFactory"><ref bean="sessionFactory" /></property>
  </bean>

  <bean id="documentationValidator" class="org.gusdb.schemabrowser.model.DocumentationValidator"/>
   	
</beans>
